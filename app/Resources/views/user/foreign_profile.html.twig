{% extends 'base.html.twig' %}

{% block body %}
    <div class="content">
        <div class="chirper">
            <h2 class="titlebar">{{ user.username }}</h2>

            {% if isFollowed %}
                <a id="btnFollow" class="chirp-author" href="{{ path('user_unfollow', {followedId: user.id}) }}">Unfollow</a>
            {% else %}
                <a id="btnFollow" class="chirp-author" href="{{ path('user_follow', {followedId: user.id}) }}">Follow</a>
            {% endif %}

            <div id="userProfileStats" class="user-details">
                <span>{{ chirpsCount }} chirps</span> | <span>{{ followingCount }} following</span> | <span>{{ followersCount }} followers</span>
            </div>
        </div>
        <div id="profileChirps" class="chirps">
            <h2 class="titlebar">{{ user.username }}'s Chirps</h2>
                {% for chirp in chirps %}
                    <article class="chirp">
                        <div class="titlebar">
                            <a href="{{ path('user_foreign_profile', {userId: user.id}) }}" class="chirp-author">{{ user.username }}</a>
                            <span class="chirp-time">
                                <a href="{{ path('chirp_like', {'id': chirp.id}) }}"><i class="fas fa-thumbs-up"></i></a> |
                                Likes: {{ chirp.likesCounter }} |
                                {% if app.getUser().isAdmin() %}
                                    <a href="{{ path('chirp_edit', {id: chirp.id}) }}">edit </a> |
                                    <a href="{{ path('chirp_delete', {id: chirp.id}) }}">delete </a> |
                                {% endif %}
                                {{ chirp.dateAdded|calcTime(chirp.dateAdded) }}
                            </span>
                        </div>
                        <p>{{ chirp.content }}</p>
                    </article>
                {% else %}
                    <div class="chirp">
                        <span class="loading">The user does not have any chirps!</span>
                    </div>
                {% endfor %}
        </div>
    </div>
{% endblock %}

